# Add tables required by the historical data gateway

## The problem we're trying to solve

Extending previous update we have changed type of gender in Person + added several related tables, staging needs a manual update to take the changes into account.

## Justification for doing a manual update

We don't have automated migration scripts yet.

## The plan

1. Run the SQL scripts below. Please note this is for staging database on staging account only.

## Link to Jira ticket

https://hackney.atlassian.net/browse/SCT-1693

## SQL statement(s)

```sql
CREATE TABLE if not exists dbo.DM_EMAIL_ADDRESSES (
    EMAIL_ID integer GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PERSON_ID numeric(16) NOT NULL,
    EMAIL varchar(240),
    TYPE varchar(240),
    CONSTRAINT XPKDM_EMAIL_ADDRESSES PRIMARY KEY (EMAIL_ID, PERSON_ID)
    );

DROP TABLE IF EXISTS dbo.DM_PERSON_LAST_UPDATED;

CREATE TABLE if not exists dbo.DM_PERSON_LAST_UPDATED (
    PERSON_LAST_UPDATED_ID integer GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PERSON_ID numeric(16) NOT NULL,
    TYPE varchar(240),
    UPDATED_AT timestamp,
    CONSTRAINT XPKDM_PERSON_LAST_UPDATED PRIMARY KEY (PERSON_LAST_UPDATED_ID, PERSON_ID)
    );


ALTER TABLE dbo.DM_PERSONS
ALTER COLUMN GENDER TYPE varchar(255);

```
